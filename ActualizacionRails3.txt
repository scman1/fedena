1. Obtener el código fuente

  C:\Sites>git clone https://github.com/scman1/fedena.git
  Cloning into 'fedena'...
  remote: Counting objects: 21434, done.
  remote: Total 21434 (delta 0), reused 0 (delta 0)
  Receiving objects: 100% (21434/21434), 12.01 MiB | 691 KiB/s, done.
  Resolving deltas: 100% (11896/11896), done.

2. Cambiarse al directorio de fedena

  C:\Sites>cd fedena

3. Verificar el estado del proyecto en rama actual

  C:\Sites\fedena>git status
  # On branch master
  nothing to commit (working directory clean)

4. Crear una nueva rama para la actualización a Rails 3.2.14

  C:\Sites\fedena>git checkout -b updateR3
  Switched to a new branch 'updateR3'

5. Verificar las ramas existentes

  C:\Sites\fedena>git branch
    master
  * updateR3

6. Verificar totas las ramas, incluso las remotas

  C:\Sites\fedena>git branch -a
    master
  * updateR3
    remotes/origin/HEAD -> origin/master
    remotes/origin/master

7. Verificar el estado del proyecto en la nueva rama

  C:\Sites\fedena>git status
  # On branch updateR3
  nothing to commit (working directory clean)

8. Crear la nueva aplicación Rails 3 con

  $ rails new .
  Permitimos que se sobreescriba todo, el respaldo del código que funciona en Rails 2 esta en el programa de control de código fuente (git).

9. Restaurar los archivos básicos de la aplicación que fueron sobreescritos

  C:\Sites\fedena>git checkout app/views/layouts/application.html.erb
  C:\Sites\fedena>git checkout app/helpers/application_helper.rb
  C:\Sites\fedena>git checkout app/controllers/application_controller.rb
  C:\Sites\fedena>git checkout db/seeds.rb
  C:\Sites\fedena>git checkout config/locales/en.yml


10. Ahora empezamos restaurando las rutas de la aplicación, la sintaxis ha cambiado pero sigue siendo soportada en rails 3
  
  C:\Sites\fedena>git checkout config/routes.rb

11. Verificamos si es necesario configurar la zona horaria, fedena esta configurado para usar UTC, que es el valor por omisión en rails 3, por lo que no se necesitan cambios.

12. El almacenamiento del identificador de la sesión es la siguiente parte a verificar. En este caso fedena también usa el estilo de rails 3, tampoco se necesita hacer nada.

13. Ahora debemos agergar las gemas que usa fedena al archivo Gemfile.

  gem 'delayed_job_active_record'


14. Problemas con delayed_job. initializer, cambiamos job por worker

15. Agregamos gem 'wicked_pdf' al archivo gemfile

16. Migramos la DB. En este caso tenemos un error, para arrreglarlo removemos rspec.rake  
    Migro manualmente en un directorio temporal
    Problemas:
      1. 20111105052819_add_fields_to_privilege.rb 
         Fallo por mass assignment de los campos :name y :description.
         Para arreglarlo agregamos lo siguiente a la clase

         attr_accessible :name, :description, :school_id 

         Pienso que se requiere mover inicializaciones al archivo de semillas

      2. 20120606050404_remove_grading_type_from_batches.rb. 

         No puede correr en sqlite. 
         Solución eliminamos este campo no deseado desde la creación y tambien esta migración
        
         eliminar: 
           20120421062750_add_grading_type_to_batches.rb
           20120606050404_remove_grading_type_from_batches.rb.

      3 20120704103545_add_cce_indices.rb el indice :fa_groups_subjects se crea dos veces, una en el hash y otra individualmente

        Este problema solo pasaen SQLite porque no acepta duplicar los nombres de indices en diferentes tablas.
        Solución:
        agregamos "1" al nombre del indice y continuamos. debemos movernos a mysql tan pronto como sea posible

      4 20130110095412_add_index_to_student_data.rb este indice:    #add_index :student_additional_details, [:student_id,:additional_field_id], :name => "student_data_index"
 ya existe, marcado como comentario

        Este problema solo pasaen SQLite porque no acepta duplicar los nombres de indices en diferentes tablas.
        Solución:
        agregamos "1" al nombre del indice y continuamos. debemos movernos a mysql tan pronto como sea posible

    Hasta aqui todas las migraciones pasan... Pendiente cambiar a MySQL y tratar de nuevo

17. Rutas... muchos problemas por la vieja sintaxis de las rutas, arreglarlas todas... long hours
    con esto quedamos igual que en el http://es.asciicasts.com/episodes/225-actualizacion-a-rails-3, la aplicacion "corre", las migraciones tambien se pueden hacer. solo se requiere algunas 

    Empezamos con la ruta de raíz y de ahí vamos activando cada ruta como se requira

18. Problema con: 
    #filter_parameter_logging :password
    en application_controller, comentado pues al parecer no es requerido

19. Problema al cargar las librerias de fedena, modificar el application.rb para que las cargue al iniciar agregando:

    config.autoload_paths += %W(#{config.root}/lib)

20. Problemas con internacionalización. en lugar de usar solo t se debe cambiar a I18n.t

20. Arreglar rutas y terminar de agregar plugins a Gemfile

21. Arreglar tests





